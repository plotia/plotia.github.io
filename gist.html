<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>GIST Visualization</title>
  <script src="https://unpkg.com/ngl@latest/dist/ngl.js"></script>
  <style>
    #viewport { width: 100%; height: 600px; }
    .btn { margin: 5px; padding: 10px; }
  </style>
</head>
<body>

<div id="viewport"></div>
<button class="btn" onclick="showMap('esw')">Show ESW</button>
<button class="btn" onclick="showMap('strans')">Show Strans</button>
<button class="btn" onclick="showMap('sorient')">Show Sorient</button>

<script>
  var stage = new NGL.Stage("viewport");

  stage.loadFile("frame1_2vom.pdb").then(function(o) {
    o.addRepresentation("cartoon");
    o.autoView();
  });

  var maps = {
    esw: {file: "gist-ESW-dens_2VOM.dx", color: "red", isolevel: -0.007},
    strans: {file: "gist-Strans-dens_2VOM.dx", color: "blue", isolevel: -0.007},
    sorient: {file: "gist-Sorient-dens_2VOM.dx", color: "green", isolevel: -0.007}
  };

  var currentSurface;

  function showMap(type) {
    if (currentSurface) {
      stage.removeComponent(currentSurface);
    }

    let config = maps[type];
    stage.loadFile(config.file, { defaultRepresentation: false }).then(function(o) {
      currentSurface = o;
      o.addRepresentation("surface", {
        isolevel: config.isolevel,
        isolevelType: "value",
        color: config.color,
        opacity: 0.7,
        useWorker: true,
        contour: true
      });
    });
  }
</script>
</body>
</html>
